# Codemod Scripts

Refactor scripts for the web.

The most probably this repo will move to something like https://codeshiftcommunity.com/

## Scripts (planned)

#### `process.env` → `import.meta.env`

<!-- Used in combination with ... -->

Modes: `snowpack`, `vite`, `raw`

If neither snowpack nor vite config file is present and `--mode` option isn't specified - it throws.

`raw` mode just replaces

- Mode: `snowpack` or `vite`

```diff
- process.env.NODE_ENV
+ process.env.MODE

// Vite
- process.env.REACT_APP_NAME
+ process.env.VITE_NAME

// Snowpack
- process.env.REACT_APP_NAME
+ process.env.SNOWPACK_PUBLIC_NAME

```

### React

#### [fix] useState setter name

```diff
- const [name, setNewName] = useState("Alex");
+ const [name, setName] = useState("Alex");
```

### React Styles

#### Material-UI createStyle → emotion className css

Old code:

```tsx
import { useStyles, Theme } from "@material-ui/core"
type Props = {
    size: number
};

const useStyles = makeStyles<Theme, Props>(theme => ({
    content: {
        paddingBottom: ({ size }) => theme.spacing(4) + size
    }
}));

const Component: React.FC<ComponentProps> = () => {
    const [size, setSize] = useState(5);
    const classes = useStyles({ size });
    return <div className={classes.content} />;
};
```

New code:

> Note 1: [vscode-styled-components extension](https://marketplace.visualstudio.com/items?itemName=jpoissonnier.vscode-styled-components) must be installed to get intellisense support.
> Note 2: That's not ideal solution because you need to handle `px` yourself (see code below)

```tsx
import { useTheme } from "@material-ui/core"
import { css } from "@emotion/css"

const Component: React.FC<ComponentProps> = () => {
    const theme = useTheme();
    
    const [size, setSize] = useState(5);
    return <div className={css`
        padding-bottom: ${theme.spacing(4) + size}px;
    `} />;
};
```

The ideal solution is `css` prop (or css injection at compilation-time).

But at least with the approach above you'll get better performance (because its actually native VSCode's *css* language provider, not TypeScript)

<!-- SCRIPTS AUTOGENERATED START -->

<!-- SCRIPTS AUTOGENERATED END -->